<!doctype html>
<html class="no-js" lang="zh-CN">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="索引" href="../genindex.html" /><link rel="search" title="搜索" href="../search.html" /><link rel="copyright" title="版权所有" href="../copyright.html" /><link rel="next" title="处理投影" href="dealing_proj.html" /><link rel="prev" title="3 用于地理空间开发的 Python 库" href="index.html" />

    <!-- Generated with Sphinx 5.3.0 and Furo 2023.03.27 -->
        <title>读取和写入地理空间数据 - python地理空间开发 1.0 文档</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../_static/mystyles.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">python地理空间开发 1.0 文档</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">python地理空间开发 1.0 文档</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">内容</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about_author.html">关于作者</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about_reviewers.html">审稿人简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preface.html">前言</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch1/index.html">1 使用 Python 进行地理空间开发</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch1/python.html">Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch1/geo_dev.html">地理空间开发</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch1/applications.html">地理空间开发的应用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch1/recent_dev.html">最新动态</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch1/summary.html">小结</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch2/index.html">2 GIS</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch2/core_concepts.html">核心 GIS 概念</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch2/gis_data_format.html">GIS 数据格式</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch2/working.html">手动处理 GIS 数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch2/summary.html">小结</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">3 用于地理空间开发的 Python 库</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">读取和写入地理空间数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="dealing_proj.html">处理投影</a></li>
<li class="toctree-l2"><a class="reference internal" href="analyzing.html">分析和处理地理空间数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="visualizing.html">可视化地理空间数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="summary.html">小结</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch4/index.html">4 地理空间数据来源</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch4/vector_format.html">矢量格式的地理空间数据来源</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch4/raster_format.html">栅格格式地理空间数据源</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch4/other_format.html">其他类型地理空间数据的来源</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch4/choosing_format.html">选择地理空间数据源</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch4/summary.html">小结</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch5/index.html">5 使用 Python 处理地理空间数据</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch5/pre-req.html">先决条件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch5/rw.html">读取和写入地理空间数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch5/changing.html">更改基准和投影</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch5/representing.html">表示和存储地理空间数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch5/performing.html">执行地理空间计算</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch5/converting.html">转换和标准化几何和距离单位</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch5/exercises.html">练习</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch5/summary.html">小结</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch6/index.html">6 数据库中的 GIS</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch6/spatially.html">空间数据库</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch6/spatially-indexes.html">空间索引</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch6/open-source.html">支持空间功能的开源数据库</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch6/commerical.html">商业空间数据库</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch6/recommended.html">建议的最佳做法</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch6/working.html">使用 Python 处理地理空间数据库</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch6/summary.html">小结</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch7/index.html">7 使用空间数据</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch7/about-distal.html">关于 DISTAL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch7/designing.html">设计和构建数据库</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch7/downloading.html">下载数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch7/importing-data.html">导入数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch7/implementing.html">实现 DISTAL 应用程序</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch7/aplication.html">应用程序审查和改进</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch7/summary.html">小结</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch8/index.html">8 使用 Python 和 Mapnik 生成地图</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch8/introducing.html">Mapnik 简介</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch8/creating.html">创建示例地图</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch8/mapnik.html">Mapnik 深度介绍</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch8/mapgenerator.html">重新审视 MapGenerator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch8/mapdefinition.html">地图定义文件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch8/summary.html">小结</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch9/index.html">9 整合所有要素——完整的地图系统</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch9/about-shapeditor.html">关于 ShapeEditor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch9/designing-shape.html">设计 ShapeEditor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch9/prerequisites.html">先决条件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch9/the-structure-ofdjango.html">Django 应用程序的结构</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch9/settingup-database.html">设置数据库</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch9/settingup-shapeeditor.html">设置 ShapeEditor 项目</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch9/defining-shapeditor.html">定义 ShapeEditor 的应用程序</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch9/creating-shared.html">创建共享应用程序</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch9/defining-datamodel.html">定义数据模型</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch9/playing.html">玩转管理系统</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch9/summary.html">小结</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch10/index.html">10 ShapeEditor – 实现列表视图、导入和导出</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch10/implementing.html">实现“列出 Shapefile”视图</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch10/importing.html">导入 Shapefile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch10/exporting.html">导出 shapefiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch10/summary.html">小结</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch11/index.html">11 ShapeEditor – 选择和编辑特征</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch11/selecting.html">选择要编辑的要素</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch11/editring.html">编辑要素</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch11/adding.html">添加要素</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch11/deleting.html">删除要素</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch11/deleting-shapefiles.html">删除 shapefiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch11/using.html">使用 ShapeEditor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch11/further.html">进一步改进和增强</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch11/summary.html">小结</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="id1">
<h1>读取和写入地理空间数据<a class="headerlink" href="#id1" title="此标题的永久链接">#</a></h1>
<p>Reading and writing geospatial data</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">中文</label><div class="tab-content docutils container">
<p>虽然理论上你可以编写自己的解析器来读取特定的地理空间数据格式，但使用现有的 Python 库来执行此操作要容易得多。我们将介绍两个用于读取和写入地理空间数据的流行库：GDAL 和 OGR。</p>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">英文</label><div class="tab-content docutils container">
<p>While you could in theory write your own parser to read a particular geospatial data format, it is much easier to use an existing Python library to do this. We will look at two popular libraries for reading and writing geospatial data: GDAL and OGR.</p>
</div>
</div>
<section id="gdal-ogr">
<h2>GDAL/OGR<a class="headerlink" href="#gdal-ogr" title="此标题的永久链接">#</a></h2>
<p>GDAL/OGR</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--1">中文</label><div class="tab-content docutils container">
<p>不幸的是，这两个库的命名相当混乱。 <strong>地理空间数据抽象库 (GDAL)</strong> 最初只是一个用于处理栅格地理空间数据的库，而单独的 OGR 库则用于处理矢量数据。然而，这两个库现在部分合并，通常以“GDAL”的组合名称一起下载和安装。为了避免混淆，我们将这个组合库称为 <strong>GDAL/OGR</strong>，并使用“GDAL”来指代栅格转换库。</p>
<p>GDAL 的默认安装支持读取 116 种不同的栅格文件格式，并写入 58 种不同的格式。OGR 默认支持读取 56 种不同的矢量文件格式，并写入 30 种格式。这使得 GDAL/OGR 成为最强大的地理空间数据转换器之一，当然也是用于读取和写入地理空间数据的最有用的免费库。</p>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--2">英文</label><div class="tab-content docutils container">
<p>Unfortunately, the naming of these two libraries is rather confusing. <strong>Geospatial Data Abstraction Library (GDAL)</strong>, was originally just a library for working with raster geospatial data, while the separate OGR library was intended to work with vector data. However, the two libraries are now partially merged, and are generally downloaded and installed together under the combined name of “GDAL”. To avoid confusion, we will call this combined library <strong>GDAL/OGR</strong> and use “GDAL” to refer to just the raster translation library.</p>
<p>A default installation of GDAL supports reading 116 different raster file formats, and writing to 58 different formats. OGR by default supports reading 56 different vector file formats, and writing to 30 formats. This makes GDAL/OGR one of the most powerful geospatial data translators available, and certainly the most useful freely-available library for reading and writing geospatial data.</p>
</div>
</div>
<section id="gdal">
<h3>GDAL 设计<a class="headerlink" href="#gdal" title="此标题的永久链接">#</a></h3>
<p>GDAL design</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--2-input--1" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--1">中文</label><div class="tab-content docutils container">
<p>GDAL 使用以下数据模型来描述栅格地理空间数据：</p>
<a class="with-border reference internal image-reference" href="../_images/69-0.png"><img alt="../_images/69-0.png" class="with-border align-center" src="../_images/69-0.png" style="width: 350.5px; height: 202.5px;" /></a>
<p>我们来看看这个模型的各个部分：</p>
<ul>
<li><p><strong>数据集 (dataset)</strong> 包含所有的栅格数据，形式为一系列栅格“波段”，以及所有这些波段共有的信息。一个数据集通常代表一个单独文件的内容。</p></li>
<li><p><strong>栅格波段 (raster band)</strong> 代表图像中的一个波段、通道或层。例如，RGB 图像数据通常会有单独的波段来表示图像中的红色、绿色和蓝色分量。</p></li>
<li><p><strong>栅格大小 (raster size)</strong> 指定图像的整体宽度和高度，以像素为单位。</p></li>
<li><dl>
<dt><strong>地理参考变换 (georeferencing transform)</strong> 将 (x, y) 栅格坐标转换为地理参考坐标，即地球表面的坐标。GDAL 支持两种类型的地理参考变换：仿射变换和地面控制点 (GCPs)。</dt><dd><ul>
<li><p><strong>仿射变换 (affine transformation)</strong> 是一种数学公式，允许对栅格数据应用以下操作：</p>
<blockquote>
<div><a class="with-border reference internal image-reference" href="../_images/70-0.png"><img alt="../_images/70-0.png" class="with-border align-center" src="../_images/70-0.png" style="width: 234.5px; height: 341.5px;" /></a>
</div></blockquote>
</li>
</ul>
<p>可以一次应用多种这些操作；这允许你执行复杂的变换，如旋转。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>仿射变换有时被称为线性变换。</p>
</div>
<ul>
<li><p><strong>地面控制点 (Ground Control Points, GCPs)</strong> 将栅格中的一个或多个位置与其对应的地理参考坐标相关联，如下图所示：</p>
<blockquote>
<div><a class="with-border reference internal image-reference" href="../_images/71-0.png"><img alt="../_images/71-0.png" class="with-border align-center" src="../_images/71-0.png" style="width: 204.5px; height: 146.5px;" /></a>
<p>注意，GDAL 并不会使用 GCPs 来转换坐标——这通常由应用程序完成，且通常涉及复杂的数学函数来执行转换。</p>
</div></blockquote>
</li>
</ul>
</dd>
</dl>
</li>
<li><p><strong>坐标系统 (coordinate system)</strong> 描述由地理参考变换产生的地理参考坐标。坐标系统包括投影、基准面、以及栅格数据使用的单位和比例。</p></li>
<li><p><strong>元数据 (metadata)</strong> 包含关于整个数据集的附加信息。</p></li>
</ul>
<p>每个栅格波段包含以下内容（以及其他内容）：</p>
<ul class="simple">
<li><p><strong>波段栅格大小 (band raster size)</strong>：这是该波段内数据的大小（横向像素数和纵向行数）。这可能与整个数据集的栅格大小相同，此时数据集为全分辨率，或者该波段的数据需要进行缩放以匹配数据集。</p></li>
<li><p>一些**波段元数据**，提供该波段特定的额外信息。</p></li>
<li><p><strong>颜色表 (color table)</strong>，描述如何将像素值转换为颜色。</p></li>
<li><p><a href="#id2"><span class="problematic" id="id3">**</span></a>栅格数据**本身。</p></li>
</ul>
<p>GDAL 提供了多个**驱动程序 (drivers)**，允许你读取（有时也能写入）各种类型的栅格地理空间数据。在读取文件时，GDAL 会根据数据类型自动选择合适的驱动程序；在写入时，你首先选择驱动程序，然后告诉驱动程序创建你想要写入的新数据集。</p>
</div>
<input class="tab-input" id="tab-set--2-input--2" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--2">英文</label><div class="tab-content docutils container">
<p>GDAL uses the following data model for describing raster geospatial data:</p>
<a class="with-border reference internal image-reference" href="../_images/69-0.png"><img alt="../_images/69-0.png" class="with-border align-center" src="../_images/69-0.png" style="width: 350.5px; height: 202.5px;" /></a>
<p>Let’s take a look at the various parts of this model:</p>
<ul>
<li><p>A <strong>dataset</strong> holds all the raster data, in the form of a collection of raster “bands”, along with information that is common to all these bands. A dataset normally represents the contents of a single file.</p></li>
<li><p>A <strong>raster band</strong> represents a band, channel, or layer within the image. For example, RGB image data would normally have separate bands for the red, green, and blue components of the image.</p></li>
<li><p>The <strong>raster size</strong> specifies the overall width and height of the image, in pixels.</p></li>
<li><dl>
<dt>The <strong>georeferencing transform</strong> converts from (x, y) raster coordinates into georeferenced coordinates—that is, coordinates on the surface of the earth. There are two types of georeferencing transforms supported by GDAL: affine transformations and ground control points.</dt><dd><ul>
<li><p>An <strong>affine transformation</strong> is a mathematical formula allowing the following operations to be applied to the raster data:</p>
<a class="with-border reference internal image-reference" href="../_images/70-0.png"><img alt="../_images/70-0.png" class="with-border align-center" src="../_images/70-0.png" style="width: 234.5px; height: 341.5px;" /></a>
</li>
</ul>
<p>More than one of these operations can be applied at once; this allows you to perform sophisticated transforms such as rotations.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Affine transformations are sometimes referred to as linear transformations.</p>
</div>
<ul>
<li><p><strong>Ground Control Points (GCPs)</strong> relate one or more positions within the raster to their equivalent georeferenced coordinates, as shown in the following figure:</p>
<a class="with-border reference internal image-reference" href="../_images/71-0.png"><img alt="../_images/71-0.png" class="with-border align-center" src="../_images/71-0.png" style="width: 204.5px; height: 146.5px;" /></a>
<p>Note that GDAL does not translate coordinates using GCPs—that is left up to the application, and generally involves complex mathematical functions to perform the transformation.</p>
</li>
</ul>
</dd>
</dl>
</li>
<li><p>The <strong>coordinate system</strong> describes the georeferenced coordinates produced by the georeferencing transform. The coordinate system includes the projection and datum, as well as the units and scale used by the raster data.</p></li>
<li><p>The <strong>metadata</strong> contains additional information about the dataset as a whole.</p></li>
</ul>
<p>Each raster band contains the following (among other things):</p>
<ul class="simple">
<li><p>The <strong>band raster size</strong>: This is the size (number of pixels across and number of lines high) for the data within the band. This may be the same as the raster size for the overall dataset, in which case the dataset is at full resolution, or the band’s data may need to be scaled to match the dataset.</p></li>
<li><p>Some <strong>band metadata</strong> providing extra information specific to this band.</p></li>
<li><p>A <strong>color table</strong> describing how pixel values are translated into colors.</p></li>
<li><p>The <strong>raster data</strong> itself.</p></li>
</ul>
<p>GDAL provides a number of <strong>drivers</strong> which allow you to read (and sometimes write) various types of raster geospatial data. When reading a file, GDAL selects a suitable driver automatically based on the type of data; when writing, you first select the driver and then tell the driver to create the new dataset you want to write to.</p>
</div>
</div>
</section>
<section id="id4">
<h3>GDAL 示例代码<a class="headerlink" href="#id4" title="此标题的永久链接">#</a></h3>
<p>GDAL example code</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--3-input--1" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--1">中文</label><div class="tab-content docutils container">
<p>一个 <strong>数字高程模型 (DEM, Digital Elevation Model)</strong> 文件包含高度值。在下面的示例程序中，我们使用 GDAL 计算一个示例 DEM 文件中包含的高度值的平均值。本例使用从 GLOBE 高程数据集下载的 DEM 文件：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">osgeo</span><span class="w"> </span><span class="kn">import</span> <span class="n">gdal</span><span class="p">,</span> <span class="n">gdalconst</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">struct</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="s2">&quot;data/e10g&quot;</span><span class="p">)</span>
<span class="n">band</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">fmt</span> <span class="o">=</span> <span class="s2">&quot;&lt;&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;h&quot;</span> <span class="o">*</span> <span class="n">band</span><span class="o">.</span><span class="n">XSize</span><span class="p">)</span>

<span class="n">totHeight</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">band</span><span class="o">.</span><span class="n">YSize</span><span class="p">):</span>
    <span class="n">scanline</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ReadRaster</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">band</span><span class="o">.</span><span class="n">XSize</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
                            <span class="n">band</span><span class="o">.</span><span class="n">XSize</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
                            <span class="n">band</span><span class="o">.</span><span class="n">DataType</span><span class="p">)</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="n">scanline</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="o">-</span><span class="mi">500</span><span class="p">:</span>
            <span class="c1"># 海洋的特殊高度值 -&gt; 忽略</span>
            <span class="k">continue</span>

        <span class="n">totHeight</span> <span class="o">=</span> <span class="n">totHeight</span> <span class="o">+</span> <span class="n">value</span>

<span class="n">average</span> <span class="o">=</span> <span class="n">totHeight</span> <span class="o">/</span> <span class="p">(</span><span class="n">band</span><span class="o">.</span><span class="n">XSize</span> <span class="o">*</span> <span class="n">band</span><span class="o">.</span><span class="n">YSize</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;Average height =&quot;</span><span class="p">,</span> <span class="n">average</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>有关 GLOBE 数据集及如何下载示例数据的更多信息，请参阅第 4 章 <em>地理空间数据的来源</em>。</p>
</div>
<p>如你所见，该程序从 DEM 文件中获取单个栅格波段，然后逐条读取扫描行 (scanline)。接着，我们使用 Python 标准库模块 <em>struct</em> 来解析扫描行中的单个高度值。由于 GLOBE 数据集使用 -500 作为代表海洋的特殊高度值，我们在计算时会排除这些值。最后，我们使用剩余的高度值计算整个 DEM 数据文件的平均高度（单位：米）。</p>
</div>
<input class="tab-input" id="tab-set--3-input--2" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--2">英文</label><div class="tab-content docutils container">
<p>A <strong>Digital Elevation Model (DEM)</strong> file contains height values. In the following example program, we use GDAL to calculate the average of the height values contained in a sample DEM file. In this case, we use a DEM file downloaded from the GLOBE elevation dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">osgeo</span><span class="w"> </span><span class="kn">import</span> <span class="n">gdal</span><span class="p">,</span><span class="n">gdalconst</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">struct</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="s2">&quot;data/e10g&quot;</span><span class="p">)</span>
<span class="n">band</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">fmt</span> <span class="o">=</span> <span class="s2">&quot;&lt;&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;h&quot;</span> <span class="o">*</span> <span class="n">band</span><span class="o">.</span><span class="n">XSize</span><span class="p">)</span>

<span class="n">totHeight</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">band</span><span class="o">.</span><span class="n">YSize</span><span class="p">):</span>
    <span class="n">scanline</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ReadRaster</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">band</span><span class="o">.</span><span class="n">XSize</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
                            <span class="n">band</span><span class="o">.</span><span class="n">XSize</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
                            <span class="n">band</span><span class="o">.</span><span class="n">DataType</span><span class="p">)</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="n">scanline</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="o">-</span><span class="mi">500</span><span class="p">:</span>
            <span class="c1"># Special height value for the sea -&gt; ignore.</span>
            <span class="k">continue</span>

        <span class="n">totHeight</span> <span class="o">=</span> <span class="n">totHeight</span> <span class="o">+</span> <span class="n">value</span>

<span class="n">average</span> <span class="o">=</span> <span class="n">totHeight</span> <span class="o">/</span> <span class="p">(</span><span class="n">band</span><span class="o">.</span><span class="n">XSize</span> <span class="o">*</span> <span class="n">band</span><span class="o">.</span><span class="n">YSize</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;Average height =&quot;</span><span class="p">,</span> <span class="n">average</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Please refer to Chapter 4, <em>Sources of Geospatial Data</em>, for more information on the GLOBE dataset and how to download the data used in this example.</p>
</div>
<p>As you can see, this program obtains the single raster band from the DEM file, and then reads through it one scanline at a time. We then use the <em>struct</em> standard Python library module to read the individual height values out of the scanline. Because the GLOBE dataset uses a special height value of -500 to represent the ocean, we exclude these values from our calculations. Finally, we use the remaining height values to calculate the average height, in meters, over the entire DEM data file.</p>
</div>
</div>
</section>
<section id="ogr">
<h3>OGR 设计<a class="headerlink" href="#ogr" title="此标题的永久链接">#</a></h3>
<p>OGR design</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--4-input--1" name="tab-set--4" type="radio"><label class="tab-label" for="tab-set--4-input--1">中文</label><div class="tab-content docutils container">
<p>OGR 使用以下模型来处理基于矢量 (vector-based) 的地理空间数据：</p>
<a class="with-border reference internal image-reference" href="../_images/73-0.png"><img alt="../_images/73-0.png" class="with-border align-center" src="../_images/73-0.png" style="width: 316.5px; height: 281.5px;" /></a>
<p>让我们更详细地了解这一设计：</p>
<ul>
<li><p><strong>数据源 (data source)</strong> 代表你正在处理的文件——但它不一定是一个文件。它也可以是一个 URL 或其他数据来源。</p></li>
<li><p>数据源包含一个或多个 <strong>图层 (layers)</strong>，每个图层表示一组相关的数据。例如，一个代表某个国家的单一数据源可能包含 “地形” 图层、”等高线” 图层、”道路” 图层和 “城市边界” 图层。而其他数据源可能仅由一个图层组成。每个图层都有一个空间参考 (spatial reference) 和一组要素 (features)。</p></li>
<li><p><strong>空间参考 (spatial reference)</strong> 指定图层数据使用的投影和基准 (datum)。</p></li>
<li><p><strong>要素 (feature)</strong> 代表图层中的某个重要元素。例如，一个要素可能代表一个州 (state)、一个城市 (city)、一条道路 (road)、一个岛屿 (island) 等。每个要素都有一组属性 (attributes) 和一个几何形状 (geometry)。</p></li>
<li><p><strong>属性 (attributes)</strong> 提供关于要素的额外元信息。例如，一个城市要素可能有一个属性用于存储城市名称，另一个属性存储人口数量，还有一个属性存储用于从外部数据库检索额外信息的唯一 ID。</p></li>
<li><p>最后，<strong>几何形状 (geometry)</strong> 描述要素的物理形状或位置。几何形状是递归的数据结构，它们可以包含子几何形状 (sub-geometries)——例如，一个 “国家” (country) 要素可能由一个几何形状组成，该几何形状包含多个岛屿，每个岛屿都由主 “国家” 几何形状中的一个子几何形状表示。</p>
<p>OGR 中的几何设计基于 <strong>开放地理空间联盟 (OGC, Open Geospatial Consortium) 的 “Simple Features” 模型</strong> 来表示地理空间几何体。更多信息，请参阅：<a class="reference external" href="http://www.opengeospatial.org/standards/sfa">http://www.opengeospatial.org/standards/sfa</a>。</p>
</li>
</ul>
<p>与 GDAL 类似，OGR 也提供了多种 <strong>驱动程序 (drivers)</strong>，可以用于读取 (有时也可以写入) 各种类型的矢量地理空间数据。在读取文件时，OGR 会自动选择合适的驱动程序；在写入时，你需要先选择驱动程序，然后指示该驱动程序创建新的数据源进行写入。</p>
</div>
<input class="tab-input" id="tab-set--4-input--2" name="tab-set--4" type="radio"><label class="tab-label" for="tab-set--4-input--2">英文</label><div class="tab-content docutils container">
<p>OGR uses the following model for working with vector-based geospatial data:</p>
<a class="with-border reference internal image-reference" href="../_images/73-0.png"><img alt="../_images/73-0.png" class="with-border align-center" src="../_images/73-0.png" style="width: 316.5px; height: 281.5px;" /></a>
<p>Let’s take a look at this design in more detail:</p>
<ul>
<li><p>The <strong>data source</strong> represents the file you are working with—though it doesn’t have to be a file. It could just as easily be a URL or some other source of data.</p></li>
<li><p>The data source has one or more <strong>layers</strong>, representing sets of related data. For example, a single data source representing a country may contain a “terrain” layer, a “contour lines” layer, a “roads” later, and a “city boundaries” layer. Other data sources may consist of just one layer. Each layer has a spatial reference and a list of features.</p></li>
<li><p>The <strong>spatial reference</strong> specifies the projection and datum used by the layer’s data.</p></li>
<li><p>A <strong>feature</strong> corresponds to some significant element within the layer. For example, a feature might represent a state, a city, a road, an island, and so on. Each feature has a list of attributes and a geometry.</p></li>
<li><p>The <strong>attributes</strong> provide additional meta-information about the feature. For example, an attribute might provide the name for a city’s feature, its population, or the feature’s unique ID used to retrieve additional information about the feature from an external database.</p></li>
<li><p>Finally, the <strong>geometry</strong> describes the physical shape or location of the feature. Geometries are recursive data structures that can themselves contain sub-geometries—for example, a “country” feature might consist of a geometry that encompasses several islands, each represented by a subgeometry within the main “country” geometry.</p>
<p>The geometry design within OGR is based on the Open Geospatial Consortium’s “Simple Features” model for representing geospatial geometries. For more information, see <a class="reference external" href="http://www.opengeospatial.org/standards/sfa">http://www.opengeospatial.org/standards/sfa</a>.</p>
</li>
</ul>
<p>Like GDAL, OGR also provides a number of drivers which allow you to read (and sometimes write) various types of vector-based geospatial data. When reading a file, OGR selects a suitable driver automatically; when writing, you first select the driver and then tell the driver to create the new data source to write to.</p>
</div>
</div>
</section>
<section id="id5">
<h3>OGR 示例代码<a class="headerlink" href="#id5" title="此标题的永久链接">#</a></h3>
<p>OGR example code</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--5-input--1" name="tab-set--5" type="radio"><label class="tab-label" for="tab-set--5-input--1">中文</label><div class="tab-content docutils container">
<p>以下示例程序使用 OGR 读取 Shapefile 的内容，并打印出每个要素的 NAME 属性值以及几何类型：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">osgeo</span><span class="w"> </span><span class="kn">import</span> <span class="n">ogr</span>

<span class="n">shapefile</span> <span class="o">=</span> <span class="n">ogr</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="s2">&quot;TM_WORLD_BORDERS-0.3.shp&quot;</span><span class="p">)</span>
<span class="n">layer</span> <span class="o">=</span> <span class="n">shapefile</span><span class="o">.</span><span class="n">GetLayer</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">GetFeatureCount</span><span class="p">()):</span>
    <span class="n">feature</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">GetFeature</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">feature</span><span class="o">.</span><span class="n">GetField</span><span class="p">(</span><span class="s2">&quot;NAME&quot;</span><span class="p">)</span>
    <span class="n">geometry</span> <span class="o">=</span> <span class="n">feature</span><span class="o">.</span><span class="n">GetGeometryRef</span><span class="p">()</span>
    <span class="nb">print</span> <span class="n">i</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">geometry</span><span class="o">.</span><span class="n">GetGeometryName</span><span class="p">()</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--5-input--2" name="tab-set--5" type="radio"><label class="tab-label" for="tab-set--5-input--2">英文</label><div class="tab-content docutils container">
<p>The following example program uses OGR to read through the contents of a shapefile, printing out the value of the NAME attribute for each feature along with the geometry type:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">osgeo</span><span class="w"> </span><span class="kn">import</span> <span class="n">ogr</span>

<span class="n">shapefile</span> <span class="o">=</span> <span class="n">ogr</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="s2">&quot;TM_WORLD_BORDERS-0.3.shp&quot;</span><span class="p">)</span>
<span class="n">layer</span> <span class="o">=</span> <span class="n">shapefile</span><span class="o">.</span><span class="n">GetLayer</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">GetFeatureCount</span><span class="p">()):</span>
    <span class="n">feature</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">GetFeature</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">feature</span><span class="o">.</span><span class="n">GetField</span><span class="p">(</span><span class="s2">&quot;NAME&quot;</span><span class="p">)</span>
    <span class="n">geometry</span> <span class="o">=</span> <span class="n">feature</span><span class="o">.</span><span class="n">GetGeometryRef</span><span class="p">()</span>
    <span class="nb">print</span> <span class="n">i</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">geometry</span><span class="o">.</span><span class="n">GetGeometryName</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="id6">
<h2>文档<a class="headerlink" href="#id6" title="此标题的永久链接">#</a></h2>
<p>Documentation</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--6-input--1" name="tab-set--6" type="radio"><label class="tab-label" for="tab-set--6-input--1">中文</label><div class="tab-content docutils container">
<p>GDAL 和 OGR 都有很好的文档支持，但对于 Python 程序员来说，使用时可能会遇到一些问题。GDAL/OGR 库及其相关的命令行工具都是用 C 和 C++ 编写的。虽然它们提供了适用于多种语言（包括 Python）的绑定 (bindings)，但官方文档主要针对 C++ 版本的库。这给 Python 用户带来了一些阅读上的挑战——不仅所有方法签名 (method signatures) 都是 C++ 风格的，而且 Python 绑定版本对许多方法和类的名称进行了调整，使其更加符合 Python 习惯（”pythonic”）。</p>
<p>幸运的是，Python 版的 GDAL/OGR 具有良好的 <strong>自文档 (self-documenting) 特性</strong> ，这要归功于 Python 绑定中嵌入的 <strong>docstrings</strong>。这意味着你可以使用 Python 自带的工具来查看相关文档，例如 <cite>pydoc</cite>。你可以在命令行运行以下命令来启动一个 GUI 界面，以便通过 Web 浏览器查看文档：</p>
<blockquote>
<div><p>% pydoc -g osgeo</p>
</div></blockquote>
<p>如果你只想查看某个方法或类的文档，可以直接在 Python 交互模式下使用 <cite>help()</cite> 命令，例如：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">osgeo.ogr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">help</span><span class="p">(</span><span class="n">osgeo</span><span class="o">.</span><span class="n">ogr</span><span class="o">.</span><span class="n">DataSource</span><span class="o">.</span><span class="n">CopyLayer</span><span class="p">)</span>
</pre></div>
</div>
<p>需要注意的是，并非所有方法都有详细的文档说明，因此在某些情况下，你仍然需要参考 <strong>GDAL 官网的 C++ 文档</strong>。此外，部分 docstrings 直接从 C++ 文档复制而来，可能不够清晰。不过，总体而言，GDAL/OGR 的文档质量较高，足以帮助你快速上手并熟练使用这个库。</p>
</div>
<input class="tab-input" id="tab-set--6-input--2" name="tab-set--6" type="radio"><label class="tab-label" for="tab-set--6-input--2">英文</label><div class="tab-content docutils container">
<p>GDAL and OGR are well documented, but with a catch for Python programmers. The GDAL/OGR library and associated command-line tools are all written in C and C++. Bindings are available which allow access from a variety of other languages, including Python, but the documentation is all written for the C++ version of the libraries. This can make reading the documentation rather challenging—not only are all the method signatures written in C++, but the Python bindings have changed many of the method and class names to make them more “pythonic”.</p>
<p>Fortunately, the Python libraries are largely self-documenting, thanks to all the docstrings embedded in the Python bindings themselves. This means you can explore the documentation using tools such as Python’s built-in pydoc utility, which can be run from the command line like this:</p>
<blockquote>
<div><p>% pydoc -g osgeo</p>
</div></blockquote>
<p>This will open up a GUI window allowing you to read the documentation using a web browser. Alternatively, if you want to find out about a single method or class, you can use Python’s built-in help() command from the Python command line, like this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">osgeo.ogr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">help</span><span class="p">(</span><span class="n">osgeo</span><span class="o">.</span><span class="n">ogr</span><span class="o">.</span><span class="n">DataSource</span><span class="o">.</span><span class="n">CopyLayer</span><span class="p">)</span>
</pre></div>
</div>
<p>Not all the methods are documented, so you may need to refer to the C++ docs on the GDAL website for more information, and some of the docstrings are copied directly from the C++ documentation—but in general the documentation for GDAL/OGR is excellent, and should allow you to quickly come up to speed using this library.</p>
</div>
</div>
</section>
<section id="id7">
<h2>可用性<a class="headerlink" href="#id7" title="此标题的永久链接">#</a></h2>
<p>Availability</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--7-input--1" name="tab-set--7" type="radio"><label class="tab-label" for="tab-set--7-input--1">中文</label><div class="tab-content docutils container">
<p>GDAL/OGR 可在现代 Unix 机器（包括 Linux 和 Mac OS X）以及大多数 Microsoft Windows 版本上运行。GDAL 的官方网站如下：</p>
<p><a class="reference external" href="http://gdal.org">http://gdal.org</a></p>
<p>OGR 的官方网站如下：</p>
<p><a class="reference external" href="http://gdal.org/ogr">http://gdal.org/ogr</a></p>
<p>要下载 GDAL/OGR，请访问 GDAL 官网并点击 Downloads 链接。
Windows 用户可能会发现 FWTools 软件包非常有用，它为 Win32 机器提供了丰富的地理空间软件，包括 GDAL/OGR 及其 Python 绑定。FWTools 可在以下地址获取：</p>
<p><a class="reference external" href="http://fwtools.maptools.org">http://fwtools.maptools.org</a></p>
<p>对于运行 Mac OS X 的用户，可以从以下地址获取预编译的二进制文件：</p>
<p><a class="reference external" href="http://www.kyngchaos.com/software/frameworks">http://www.kyngchaos.com/software/frameworks</a></p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>请确保安装 GDAL 1.9 或更高版本，因为本书中的示例代码需要该版本才能运行。</p>
</div>
<p>作为一个开源软件包，GDAL/OGR 的完整源代码可在官网获取，您可以自行编译。但对于大多数用户来说，直接使用预编译的二进制版本更加便捷。</p>
</div>
<input class="tab-input" id="tab-set--7-input--2" name="tab-set--7" type="radio"><label class="tab-label" for="tab-set--7-input--2">英文</label><div class="tab-content docutils container">
<p>GDAL/OGR runs on modern Unix machines, including Linux and Mac OS X, as well as most versions of Microsoft Windows. The main website for GDAL can be found at:</p>
<p><a class="reference external" href="http://gdal.org">http://gdal.org</a></p>
<p>The main website for OGR is at:</p>
<p><a class="reference external" href="http://gdal.org/ogr">http://gdal.org/ogr</a></p>
<p>To download GDAL/OGR, follow the Downloads link on the main GDAL website.
Windows users may find the FWTools package useful, as it provides a wide range
of geospatial software for win32 machines, including GDAL/OGR and its Python
bindings. FWTools can be found at:</p>
<p><a class="reference external" href="http://fwtools.maptools.org">http://fwtools.maptools.org</a></p>
<p>For those running Mac OS X, prebuilt binaries can be obtained from:</p>
<p><a class="reference external" href="http://www.kyngchaos.com/software/frameworks">http://www.kyngchaos.com/software/frameworks</a></p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Make sure that you install GDAL Version 1.9 or later, as you will need this version to work through the examples in this book.</p>
</div>
<p>Being an open source package, the complete source code for GDAL/OGR is available from the website, so you can compile it yourself. Most people, however, will simply want to use a prebuilt binary version.</p>
</div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="dealing_proj.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">处理投影</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">3 用于地理空间开发的 Python 库</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                <a href="../copyright.html">Copyright</a> &#169; 2025, Erik Westra
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">读取和写入地理空间数据</a><ul>
<li><a class="reference internal" href="#gdal-ogr">GDAL/OGR</a><ul>
<li><a class="reference internal" href="#gdal">GDAL 设计</a></li>
<li><a class="reference internal" href="#id4">GDAL 示例代码</a></li>
<li><a class="reference internal" href="#ogr">OGR 设计</a></li>
<li><a class="reference internal" href="#id5">OGR 示例代码</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id6">文档</a></li>
<li><a class="reference internal" href="#id7">可用性</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/tabs.js"></script>
    <script src="../_static/translations.js"></script>
    </body>
</html>